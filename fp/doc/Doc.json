{
  "apiName": "PreCode Generator API",
  "version": "v1",
  "description": "API REST para autenticación de usuarios y generación de código mediante Gemini.",
  "basePath": "/api/v1",
  "endpoints": [
    {
      "path": "/auth/login",
      "method": "POST",
      "summary": "Iniciar sesión y obtener token JWT",
      "tags": ["Auth"],
      "security": "None",
      "request": {
        "contentType": "application/json",
        "body": {
          "email": {"type": "string", "required": true, "description": "Correo electrónico del usuario.", "example": "user@example.com"},
          "password": {"type": "string", "required": true, "description": "Contraseña del usuario.", "example": "mypassword"}
        }
      },
      "response": {
        "200": {
          "description": "Inicio de sesión exitoso.",
          "body": {
            "message": {"type": "string", "example": "Inicio de sesión exitoso"},
            "token": {"type": "string", "description": "JSON Web Token para rutas protegidas.", "example": "eyJhb..."},
            "user": {"type": "object", "description": "Datos básicos del usuario.", "fields": {"id": "number", "username": "string", "email": "string"}}
          }
        },
        "400": {"description": "Petición inválida. Faltan campos."},
        "401": {"description": "Credenciales inválidas."},
        "404": {"description": "Usuario no existe."}
      }
    },
    {
      "path": "/auth/profile",
      "method": "GET",
      "summary": "Obtener perfil del usuario autenticado",
      "tags": ["Auth"],
      "security": "JWT Bearer Token",
      "request": {
        "headers": {"Authorization": {"type": "string", "required": true, "description": "Bearer <jwt_token>"}}
      },
      "response": {
        "200": {
          "description": "Perfil obtenido.",
          "body": {
            "user": {"type": "object", "description": "Datos del perfil.", "fields": {"id": "number", "username": "string", "email": "string"}}
          }
        },
        "401": {"description": "No autorizado. Token faltante o inválido."}
      }
    },
    {
      "path": "/gemini/process",
      "method": "POST",
      "summary": "Generación de código por IA",
      "tags": ["Gemini", "AI"],
      "security": "JWT Bearer Token",
      "request": {
        "contentType": "application/json",
        "headers": {"Authorization": {"type": "string", "required": true, "description": "Bearer <jwt_token>"}},
        "body": {
          "task_type": {"type": "string", "required": true, "description": "Tipo de tarea a realizar.", "example": "code_generation"},
          "data": {
            "type": "object",
            "required": true,
            "description": "Configuración para la tarea de generación.",
            "fields": {
              "target_language": {"type": "string", "required": true, "example": "Python"},
              "user_instructions": {"type": "string", "required": true, "example": "Crear una clase con un constructor."},
              "context_headers": {"type": "object", "required": false, "description": "Restricciones de clase/métodos."},
              "style_config": {"type": "object", "required": false, "description": "Estilo de código (ej. snake_case)."}
            }
          }
        }
      },
      "response": {
        "200": {
          "description": "Código generado exitosamente.",
          "body": {"code": {"type": "string", "description": "El código fuente generado por Gemini.", "example": "def my_class():\n  pass"}}
        },
        "400": {"description": "Petición inválida. Faltan campos obligatorios."},
        "401": {"description": "No autorizado. Token inválido."},
        "500": {"description": "Error en la API de Gemini o interno del servidor."}
      }
    }
  ]
}